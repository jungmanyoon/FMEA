# FMEA 핵심 개념 및 데이터 구조

**AIAG-VDA 2019 기반 FMEA 작성을 위한 핵심 개념**

---

## [!] 중요: 완전한 피라미드 구조 (1:N:N:N:N:N:N:N)

### FMEA 표의 본질

- **1개 행 = 1개 고장 체인(Failure Chain)**
- 고장 체인: **FE(고장영향) ← FM(고장형태) ← FC(고장원인)**

### 품질 우선 원칙 (CRITICAL)

**[!] 핵심: 품질 > 개수**

- [OK] **많을수록 좋다** - 의미있는 항목이면 개수 제한 없음
- [X] **개수 채우기 금지** - 중복/분할/무관한 항목으로 부풀리지 말 것
- [OK] **실제 위험 식별** - 변압기에서 실제 발생 가능한 고장만
- [X] **현실성 없는 항목** - 이론적으로만 가능한 비현실적 시나리오 배제

### 완전한 계층 구조: 피라미드의 모든 레벨에서 N개 가능

**CRITICAL**: 부품명만 1개이고, 그 하단 모든 레벨은 N개씩 확장 가능한 피라미드 구조

```
1개 부품 (예: CORE)
  │
  ├─ 기능 #1 (예: 자속 전달)
  │   ├─ 고장영향 #1-1 (예: 전압 변환 불가)
  │   │   ├─ 고장형태 #1-1-1 (예: 층간단락)
  │   │   │   ├─ 고장원인 #1-1-1-1 (예: 철심 재질 열화)
  │   │   │   │   ├─ 고장메커니즘: 자기 특성 저하 → 자속밀도 감소
  │   │   │   │   ├─ 현재 예방대책 #1: 고효율 규소강판 사용
  │   │   │   │   ├─ 현재 예방대책 #2: 재질 검사 (X-ray)
  │   │   │   │   │   ├─ 현재 검출대책 #1: 무부하 손실 측정 (FAT)
  │   │   │   │   │   └─ 현재 검출대책 #2: 자기특성 시험
  │   │   │   │   └─ O/D/AP 값
  │   │   │   ├─ 고장원인 #1-1-1-2 (예: 철심 두께 불량)
  │   │   │   │   └─ (메커니즘, 대책, 검출...)
  │   │   │   └─ 고장원인 #1-1-1-3 (예: 적층 접착 불량)
  │   │   │       └─ (메커니즘, 대책, 검출...)
  │   │   ├─ 고장형태 #1-1-2 (예: 과열)
  │   │   │   └─ (고장원인 N개, 각 원인마다 메커니즘/대책/검출...)
  │   │   └─ 고장형태 #1-1-3 (예: 부식)
  │   │       └─ (고장원인 N개...)
  │   ├─ 고장영향 #1-2 (예: 권선 소손)
  │   │   ├─ 고장형태 #1-2-1 (예: 변형)
  │   │   │   └─ (고장원인 N개...)
  │   │   └─ 고장형태 #1-2-2 (예: 균열)
  │   │       └─ (고장원인 N개...)
  │   └─ 고장영향 #1-3 (예: 소음 증가)
  │       └─ (고장형태 N개, 각 모드마다 원인/메커니즘/대책...)
  │
  ├─ 기능 #2 (예: 효율 최대화)
  │   ├─ 고장영향 #2-1
  │   │   └─ (고장형태 N개...)
  │   └─ 고장영향 #2-2
  │       └─ (고장형태 N개...)
  │
  └─ 기능 #3 (예: 기계적 지지)
      ├─ 고장영향 #3-1
      │   └─ (고장형태 N개...)
      └─ 고장영향 #3-2
          └─ (고장형태 N개...)
```

**핵심 원칙**:
- **1개 부품 → N개 기능** (부품이 수행하는 모든 기능)
- **1개 기능 → N개 고장영향** (기능 실패 시 상위 시스템에 미치는 모든 영향)
- **1개 고장영향 → N개 고장형태** (영향을 일으키는 모든 고장 형태)
- **1개 고장형태 → N개 고장원인** (모드를 발생시키는 모든 근본 원인)
- **1개 고장원인 → N개 고장메커니즘** (원인이 작동하는 물리적 과정)
- **1개 고장메커니즘 → N개 현재 예방대책** (메커니즘을 방지하는 모든 대책)
- **1개 현재 예방대책 → N개 현재 검출대책** (대책의 효과를 확인하는 모든 검출 방법)

### [OK] 올바른 행 생성 규칙

**예시: CORE 부품 → "자속 전달" 기능**

기능 #1 "자속 전달"에서 발생 가능한 고장 시나리오:

**고장영향 #1-1 "전압 변환 불가" + 고장형태 #1-1-1 "층간단락" 조합**:
- 고장원인 #1-1-1-1: 철심 재질 열화 → 1개 행
- 고장원인 #1-1-1-2: 철심 두께 불량 → 1개 행 (영향/모드 병합)
- 고장원인 #1-1-1-3: 적층 접착 불량 → 1개 행 (영향/모드 병합)

**고장영향 #1-1 "전압 변환 불가" + 고장형태 #1-1-2 "과열" 조합**:
- 고장원인 #1-1-2-1: 철심 단면적 부족 → 1개 행
- 고장원인 #1-1-2-2: 자속밀도 설계 오류 → 1개 행

**고장영향 #1-2 "권선 소손" + 고장형태 #1-2-1 "변형" 조합**:
- 고장원인 #1-2-1-1: 과부하 운전 → 1개 행
- 고장원인 #1-2-1-2: 냉각 불량 → 1개 행

**결과**: WebSearch에서 발견된 항목에 따라 자연스럽게 행 생성 (억지로 개수를 맞추지 않음)

### [X] 잘못된 구조 (1:1:1 매칭)

- 1개 기능 → 1개 고장영향 → 1개 고장형태 → 1개 고장원인
- **문제점**: 고장영향, 고장형태, 고장원인이 각각 1개씩만 식별되어 대부분의 위험 시나리오 누락
- **올바른 접근**: 각 레벨에서 가능한 모든 항목을 식별 (N개씩)

---

## [LIST] Excel 셀 병합 규칙

### 세로 병합 원칙

1. **고장영향(FE) 열**: 동일한 영향이 여러 행에 걸쳐있으면 세로 병합
2. **고장형태(FM) 열**: 동일한 모드에 여러 원인이 있으면 세로 병합
3. **Severity(S) 열**: 동일 영향에 대해 병합 (영향은 고정값)
4. **Occurrence(O), Detection(D) 열**: 병합 없음 (각 원인별로 고유)
5. **대책 관련 열**: 병합 없음 (각 원인별로 고유)

### 병합 예시

```
┌──────────┬──────────┬──────────┬───┬───┬───┬───┐
│ 부품/    │ 고장영향 │ 고장형태 │고장│ S │ O │ D │
│ 기능     │ (FE)     │ (FM)     │원인│   │   │   │
│          │          │          │(FC)│   │   │   │
├──────────┼──────────┼──────────┼───┼───┼───┼───┤
│ 철심본체 │ 절연유   │ 철심과열 │재질│ 9 │ 4 │ 3 │
│          │ 열화/    │ 발생     │불량│   │   │   │
│ 1차-2차  │ 냉각부담 │          ├───┤(병├───┼───┤
│ 자속전달 │ 증가/    │          │접착│합)│ 4 │ 4 │
│          │ 수명단축 │          │불량│   │   │   │
│          │          │          ├───┤   ├───┼───┤
│(세로병합)│(세로병합)│(세로병합)│와전│   │ 5 │ 3 │
│          │          │          │류  │   │   │   │
├──────────┤          ├──────────┼───┤   ├───┼───┤
│          │          │ 접지불량 │단선│   │ 5 │ 5 │
│          │          │          │    │   │   │   │
└──────────┴──────────┴──────────┴───┴───┴───┴───┘
```

---

## 🔗 FCM (Failure Cause-Mechanism-Mode) 관계

### 3단계 고장 분석

1. **FC (Failure Cause)**: 고장 원인 (Root Cause)
   - 예: "철심 재질 불량", "적층 접착 불량"

2. **Mechanism**: 고장 메커니즘 (물리적 과정)
   - 예: "철손(히스테리시스+와전류) 증가 → 발열 → 온도 상승"

3. **FM (Failure Mode)**: 고장 형태 (기능 상실 형태)
   - 예: "철심 과열 발생"

4. **FE (Failure Effect)**: 고장 영향 (상위 시스템에 미치는 영향)
   - 예: "절연유 열화/변압기 수명 단축"

### 데이터 구조에 반영

```python
{
    "고장원인": "철심 재질 불량/적층 접착 불량/와전류 손실 증가",
    "고장메커니즘": "철손(히스테리시스+와전류) 증가 → 발열 → 온도 상승",
    "고장형태": "철심 과열 발생 가능성",
    "고장영향": "절연유 열화/냉각 시스템 부담 증가/변압기 수명 단축/화재 위험"
}
```

---

## [TARGET] RCA (Root Cause Analysis) 트리

### 고장형태별 원인 트리 작성 원칙

- **Why-Why 분석**: 5-Why 기법으로 근본원인 도출
- **AND/OR 게이트**: 복합 원인 표현

### 제품 라이프사이클 4단계별 고장 원인

**[!] CRITICAL**: DFMEA, PFMEA 모두 1-4단계 고려, 개선 초점이 다름

- **DFMEA (1-4단계)**: 설계, 재료, 제작, 시험 → **설계 개선**으로 위험 예방
- **PFMEA (1-4단계)**: 설계, 재료, 제작, 시험 → **공정 개선**으로 품질 관리

#### 1. 설계 단계 불량 → Phase 1-8 (설계 공정 전체)

- 설계 오류 (사양 오류, 계산 오류, 공차 문제)
- 도면 불량 (치수 오류, 도면 누락, 도면 불일치)
- 표준 미준수 (IEC/IEEE 표준 위반)
- Design Review 누락
- **담당**: 전기설계팀, 구조설계팀
- **검출**: Design Review, FMEA, PDR/CDR

#### 2. 재료 단계 불량 → Step 1-3 (철심/권선 재료 투입)

- 재질 선정 오류 (부적절한 재료 사양 선택)
- 재료 특성 미달 (설계 요구사항 불만족)
- **담당**: 전기설계팀, 구조설계팀 (재료 선정)
- **검출**: Design Review, 재질 시험

#### 3. 제작/가공 단계 불량 → Step 1-5 (철심/권선 제조 및 조립)

- 가공 불량 (절단, 굽힘, 천공 오류)
- 치수 불량 (공차 초과, 위치 오차)
- 조립 불량 (체결 불량, 정렬 불량, 누락)
- 용접 불량 (용접 강도 부족, 기공 발생)
- 압착 불량 (압착력 부족/과다)
- 권선 불량 (권수 오류, 절연 불량, 층간 단락)
- 함침 불량 (절연 처리 불충분)
- 작업 표준 미준수 (SOP 위반, 작업자 미숙)
- **담당**: 생산팀
- **검출**: IPQC, DCWR, Preload Recording

#### 4. 시험/검사 단계 불량 → Step 6-10 (VPD, 진공 주유, FAT)

- 시험 불량 (시험 조건 부적절, 시험 장비 교정 누락)
- 검사 누락 (필수 검사 항목 생략)
- 판정 오류 (합격 기준 오판정)
- 시험 성적서 오기재
- 형식 시험 미실시 (내전압, PD, 온도상승 시험 등)
- VPD 조건 부적절 (온도/압력/시간)
- 진공 주유 불량 (진공도 부족, 오일 불량)
- **담당**: QA팀, 시험팀
- **검출**: VPD Log, Oil Quality Test, FAT Certificate

---

## 고장 원인 작성 예시

### [OK] 올바른 예시 (제품 라이프사이클 4단계)

**FMEA (1-4단계, 설계 개선 초점)**:

**1. 설계 단계**:
- "설계: 권선 층간 절연 거리 설계 오류"
- "설계: 냉각 시스템 용량 계산 오류"
- "설계: 철심 적층두께 설계 오류"

**2. 재료 단계**:
- "재료: 절연재 재질 선정 오류로 절연 내력 부족"
- "재료: 철심 재질 사양 오류로 철손 과다"
- "재료: 규소강판 재질 불량 (Si 함량 부족)"

**3. 제작 단계** (제조성 고려):
- "제작: 권선 작업 중 절연지 손상 발생"
- "제작: 클램프 체결 토크 부족"
- "제작: 철심 적층 공정 불량 (압착력 부족)"

**4. 시험 단계** (시험성 고려):
- "시험: 내전압 시험 시 전압 인가 순서 오류"
- "시험: VPD 온도/압력/시간 조건 부적절"
- "시험: 무부하 손실 측정 조건 부적절"

**PFMEA (1-4단계, 공정 개선 초점)**:

**1. 설계 단계** (설계 검증 강화):
- "설계: 권선 층간 절연 거리 설계 오류" → 설계 검증 프로세스 강화
- "설계: 냉각 시스템 용량 계산 오류" → Design Review 강화

**2. 재료 단계** (입고 검사 강화):
- "재료: 절연재 재질 선정 오류" → 입고 검사 기준 강화
- "재료: 규소강판 재질 불량" → 공급사 품질 인증 강화

**3. 제작 단계**:
- "제작: 권선 작업 중 절연지 손상 발생"
- "제작: 클램프 체결 토크 부족"
- "제작: 철심 적층 공정 불량 (압착력 부족)"

**4. 시험 단계**:
- "시험: 내전압 시험 시 전압 인가 순서 오류"
- "시험: VPD 온도/압력/시간 조건 부적절"
- "시험: 무부하 손실 측정 조건 부적절"

### [X] 잘못된 예시

- "제작 불량" (너무 포괄적, 원인 불명확)
- "작업 불량" (구체성 부족)
- "철심 재질 불량" (단계 미표시)

---

## DFMEA vs PFMEA 차이

**차이점**:

| 구분 | DFMEA | PFMEA |
|------|-------|-------|
| **담당 부서** | 전기설계팀, 구조설계팀, 개발팀 | 생산팀, 생산기획팀, QA팀 |
| **전제** | 공정은 완벽하다고 가정 | 설계는 완벽하다고 가정 |
| **고장원인 범위** | **1-4단계** (설계, 재료, 제작, 시험) | **1-4단계** (설계, 재료, 제작, 시험) |
| **개선 초점** | **설계 개선**을 통한 위험 예방 | **공정 개선**을 통한 품질 관리 |

**예시**:
- **DFMEA**: "설계: 클램프 체결 구조 설계 불량" → 설계팀이 체결 구조를 개선
- **PFMEA**: "제작: 클램프 체결 토크 부족" → 생산팀이 체결 공정을 개선
