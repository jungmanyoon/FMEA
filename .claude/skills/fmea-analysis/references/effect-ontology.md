# 고장영향 온톨로지 (Effect Ontology)

**목적**:
1. C열(고장영향)에 E열(고장형태) 내용 금지 - 물리적 상태는 E열로!
2. 기능 동사별 금지 키워드 확장 (기능-고장영향 인과관계 검증용)

**적용**: `scripts/validate_failure_effect.py`의 `load_effect_ontology()` 함수에서 파싱

---

## SECTION:FORBIDDEN_PHYSICAL_IN_EFFECT

> **[BLOCKING]** C열(고장영향)에 물리적 상태/변화 금지!
> 물리적 상태는 E열(고장형태)에 작성해야 함

### 카테고리 1: 형상 변화
형상변화: 변형, 뒤틀림, 좌굴, 휨, 팽창, 수축, 찌그러짐, 굽힘, 비틀림

### 카테고리 2: 손상/파괴
손상파괴: 크랙, 균열, 파손, 파단, 절손, 박리, 벗겨짐, 마모, 침식, 깎임, 손상

### 카테고리 3: 체결/연결 상태
체결연결: 이완, 풀림, 탈락, 분리, 이격, 누락, 헐거움, 느슨함, 빠짐, 끊어짐

### 카테고리 4: 표면 상태
표면상태: 부식, 녹, 산화, 변색, 탄화, 오염, 스크래치, 흠집, 얼룩

### 카테고리 5: 누출 상태
누출상태: 누유, 누기, 침투, 기포, 누설

### 카테고리 6: 전기적 상태 (현재 관찰 가능)
전기상태: 단락, 단선, 접촉불량, 층간단락, 개방, 합선

### 카테고리 7: 공정 결과 (현재 관찰됨)
공정결과: 용접불량, 적층불량, 가공불량, 압착불량, 체결불량, 조립불량, 치수초과, 치수미달

### 카테고리 8: 시점 태그 (C열에 시점 태그 금지!)
시점태그: (FAC), (TEST), (ELEC), 제작, 시험, 운전 <- C열에 사용 금지

> **시점 정보는 S값으로만 반영**: 제작 중 발견(S=2-5), 시험 중 발견(S=4-7), 운전 중 발생(S=7-10)

---

## SECTION:PHYSICAL_STATE_TO_EFFECT_CONVERSION

> **C열에서 물리적 상태 발견 시 -> E열로 이동 + 근본 영향 도출**
> **[!!] JSON 생성 전 필수 확인! 스크립트 BLOCKING 전 자체 검증!**

### 변환 규칙 예시 (기본)

| C열 (잘못됨) | E열 (이동) | C열 (수정) | 변환 이유 |
|-------------|-----------|-----------|----------|
| 체결 이완 | 부족: 이완 | 고정력 저하 | 이완=눈에 보이는 현상 |
| 균열 발생 | 부족: 균열 | 절연 내력 저하 | 균열=눈에 보이는 현상 |
| 볼트 탈락 | 부족: 탈락 | 체결 불가 | 탈락=눈에 보이는 현상 |
| 변형 | 과도: 변형 | 조립 정밀도 저하 | 변형=눈에 보이는 현상 |
| 부식 | 유해: 부식 | 강도 저하 | 부식=눈에 보이는 현상 |
| 크랙 | 부족: 크랙 | 구조 강도 저하 | 크랙=눈에 보이는 현상 |

### 변환 규칙 예시 (실제 오류 사례)

> BCT 자재표 등 실제 FMEA 작성 시 발생한 오류

| C열 (잘못됨) | E열 (이동) | C열 (수정) | 기능 맥락 |
|-------------|-----------|-----------|----------|
| BCT 위치 이탈 | 부족: 위치 이탈 | **BCT 기능 상실** | BCT 고정 기능 |
| 체결부 분리 | 부족: 분리 | **구조물 고정 불가** | 체결 기능 |
| 체결부 이완 | 부족: 이완 | **체결력 유지 기능 저하** | 체결 유지 기능 |
| 표면 손상 | 부족: 손상 | **절연 기능 저하** | 절연 유지 기능 |
| 접촉면 손상 | 부족: 손상 | **전류 통전 기능 저하** | 통전 기능 |
| 절연 손상 | 부족: 손상 | **절연 내력 저하** | 절연 기능 |
| 고정부 탈락 | 부족: 탈락 | **고정 기능 상실** | 고정 기능 |
| 나사산 마모 | 부족: 마모 | **체결 기능 저하** | 나사 체결 기능 |

### C열 올바른 값 패턴

**기능 실패 결과 표현 패턴**: `[기능] + 저하/상실/불가/초과`

| 기능 유형 | 올바른 C열 값 예시 |
|----------|-------------------|
| 고정/체결 | 고정력 저하, 체결 기능 상실, 체결력 유지 불가 |
| 절연 | 절연 기능 저하, 절연 내력 저하, 절연파괴 |
| 통전 | 통전 불가, 전류 통전 기능 저하, 접촉 저항 증가 |
| 냉각 | 냉각 기능 저하, 냉각 효율 저하, 과열 |
| 변환 | 변환 효율 저하, 전압 변환 불가, 손실 증가 |
| 보호 | 보호 기능 상실, 지락사고, 단락사고 |

### FAT 불합격 vs 공정 불량 구분

| 표현 | 올바른 위치 | 이유 |
|------|-----------|------|
| FAT 불합격 | **금지** (C열/E열 모두) | 발견 장소일 뿐, 영향/형태 아님 |
| FAT에서 발견된 원인 (절연파괴 등) | C열 | 기능 실패 결과 |
| 조립불량 (눈에 보이는 상태) | E열 | 공정 관점의 물리적 상태 |
| 조립 정밀도 저하 (기능 결과) | C열 | 시스템 영향 |

---

## SECTION:COLUMN_DISTINCTION_GUIDE

> **핵심 구분 질문**

### C열 vs E열 판단법

| 질문 | YES -> | NO -> |
|------|--------|-------|
| "부품을 보면 이게 보이나?" | E열 (형태) | C열 검토 |
| "그래서 시스템이 뭐가 안 되나?" | C열 (영향) | E열 검토 |

### 적용 예시

| 값 | 부품에 보이나? | 시스템이 안 되나? | 올바른 컬럼 |
|----|--------------|-----------------|------------|
| 볼트 탈락 | YES | - | E열 |
| 통전 불가 | NO | YES | C열 |
| 체결 이완 | YES | - | E열 |
| 지락사고 | NO | YES | C열 |
| 크랙 | YES | - | E열 |
| 과열 | NO (만져야 앎) | YES | C열 |
| 변색 (과열 흔적) | YES | - | E열 |
| 권선 소손 | NO (결과) | YES | C열 |
| 절연파괴 | NO (결과) | YES | C열 |

---

## SECTION:FORBIDDEN_KEYWORDS_BY_VERB

> 기능 동사별 금지 고장영향 (기능-고장영향 인과관계 검증용)
> diamond-structure.md의 매핑을 온톨로지로 확장

### 온톨로지 매핑 테이블

| 기본 키워드 | 관련어 (자동 확장) |
|------------|-------------------|
| **소음** | 이상음, 노이즈, 공명, 소음 기준 초과, 소음 발생, 소음 증가, 이상 소음, 비정상 소음 |
| **진동** | 떨림, 공진, 진동 기준 초과, 진동 발생, 진동 증가, 이상 진동, 비정상 진동, 공진 발생 |
| **외관** | 외관 품질 저하, 외관 불량, 외관 손상, 외관 결함, 표면 결함, 도장 불량, 미관 저하 |
| **접지** | 다점접지, 접지 불량, 접지 문제, 접지 오류, 순환전류, 접지 누락, 접지 결함 |
| **효율** | 효율 저하, 효율 감소, 효율 손실, 에너지 손실, 효율 불량 |
| **손실** | 손실 증가, 무부하손실 증가, 부하손실 증가, 철손 증가, 동손 증가 |
| **절연** | 절연 저하, 절연 파괴, 절연 열화, 절연 불량, 절연 결함, 절연 손상, 부분방전 |
| **누유** | 오일 누출, 유체 누출, 기름 누출, 누유 발생, 밀봉 불량 |
| **조립** | 조립 정밀도 저하, 조립 불량, 조립 오류, 조립 문제, 조립 결함, 치수 불량 |

---

## 파싱 규칙

### FORBIDDEN_PHYSICAL_IN_EFFECT 파싱
- `카테고리명: 키워드1, 키워드2, ...` 형식
- 모든 카테고리의 키워드를 `forbidden_physical` 리스트로 수집

### FORBIDDEN_KEYWORDS_BY_VERB 파싱
- `| **키워드** | 관련어1, 관련어2, ... |` 형식
- 기본 키워드는 항상 관련어에 포함 (자기 자신도 매칭)
- 대소문자 구분 없음

---

## 버전 관리

**버전**: 2.2
**작성일**: 2026-01-30
**변경 이력**:
- v1.0: 초기 버전 - 9개 기본 키워드 온톨로지 정의
- v1.1: C열에 눈에 보이는 현상 금지 규칙 추가
- v2.0: C열 금지어 7개 카테고리 체계화, 구분 가이드 추가
- v2.1: 카테고리 8 시점 태그 금지 추가 ([FAC], [TEST], [ELEC] 등)
- v2.2: 실제 오류 사례 변환 예시 추가 (BCT 등), C열 올바른 값 패턴 추가
