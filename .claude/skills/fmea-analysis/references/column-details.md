# FMEA 22개 컬럼 상세 가이드

**AIAG-VDA 2019 통합 방식**: 현재 상태 (1-13) + 조치 계획 (14-17) + 개선 후 (18-22)

---

## ⏰ 시점 기반 컬럼 이해 (CRITICAL - 회의 합의 260109)

> **핵심 원리**: FMEA 컬럼은 시점(과거/현재/미래)으로 구분됨
> 이 개념을 이해하면 고장형태/고장영향/고장원인 혼동 방지

### 시점별 컬럼 매핑

| 시점 | 컬럼 | 질문 | 내용 | 예시 |
|------|------|------|------|------|
| **과거** | F열 (고장원인) | "왜 발생했나?" | 고장의 근본 원인 | 설계: 두께 부족, 재료: 순도 불량 |
| **현재** | E열 (고장형태) | "지금 관찰 가능?" | 현재 관찰 가능한 현상 | 변형, 크랙, 부식, 이완, 변색 |
| **미래** | C열 (고장영향) | "앞으로 무슨 일?" | 기능 실패의 결과 | 전압 변환 불가, 지락사고, 과열, 누출 |

### 시점 기반 자가 검증

```
작성 후 각 항목에 대해 다음 질문:

E열 (고장형태): "이것이 지금 당장 눈에 보이는가?"
├─ YES → 올바름 (예: 변형, 크랙, 부식)
└─ NO → 다른 컬럼으로 이동 필요

C열 (고장영향): "이것이 앞으로 고객에게 영향을 주는가?"
├─ YES → 올바름 (예: 소음, 진동, 화재)
└─ NO → 다른 컬럼으로 이동 필요

F열 (고장원인): "이것이 과거에 잘못된 것인가?"
├─ YES → 올바름 (예: 설계 오류, 재료 불량)
└─ NO → 다른 컬럼으로 이동 필요
```

### 혼동 방지 예시

| 항목 | 잘못된 배치 | 올바른 배치 | 이유 |
|------|------------|------------|------|
| **피로 파손** | E열: "피로 파손" | E열: "파손", G열: "피로" | 피로는 메커니즘(과정), 파손이 형태(현재) |
| **임의 사용** | E열: "임의 사용" | F열: "설계: 임의 사용" | 사용은 과거 원인 |
| **소음** | E열: "소음" | C열: "소음 증가" | 소음은 미래 영향 |
| **진동** | E열: "진동" | C열: "진동 발생" | 진동은 미래 영향 |
| **철손 증가** | E열: "철손 증가" | G열: "와전류→철손 증가" | 측정값은 메커니즘 |

**참조**: [5why-vs-fmea.md](5why-vs-fmea.md) - FMEA vs 5 Why 비교

---

## 현재 상태 (1-13번 컬럼)

### 1. 부품명 (A열)
**내용**: 분석 대상 부품 이름
**형식**: `"CORE"`, `"WINDING"`, `"BUSHING"`
**예시**: CORE, WINDING, TAP_CHANGER
**주의**: 번호 금지 ([X] "1. CORE", "부품 1: CORE")

### 2. 기능 (B열)
**내용**: 부품의 기능 (부품당 3-10개)
**1:N 관계**: 1개 부품 → **N개 기능** (3-10개)
**형식**: `"자속 전달"`, `"전압 변환"`
**예시**: 자속 전달, 효율 최대화, 기계적 지지
**주의**: 번호 금지 ([X] "기능 1: 자속 전달")

### 3. 고장영향 (C열)
**내용**: 기능 실패 시 **미래에 고객이 인식하는 최종 결과**
**1:N 관계**: 1개 기능 → **N개 고장영향** (시점별로 각각 식별)

**[!!] 핵심 정의 (CRITICAL)**:
> **고장영향 = 미래 시점에서 고객(사용자)이 인식하는 최종 결과**
>
> 고장형태(현재 관찰 현상)와 구분 필수!

**[!!] 고장영향 = 기능 실패의 결과 (회의 합의 260109)**:

> 고장영향은 **기능이 실패했을 때 발생하는 결과**여야 함 (인과관계 필수!)
> 발견 장소(조립 불합격, FAT 불합격 등)는 고장영향이 **아님**

**S값 범위로 심각도 반영**:
| S값 범위 | 심각도 | 의미 |
|---------|--------|------|
| 2-5 | 경미 | 조기 발견 시 재작업 수준 |
| 6-7 | 중간 | 시험/검사로 발견, 일정 지연 |
| 8-10 | 심각 | 현장 고장, 안전 사고 |

**[OK] 올바른 고장영향 예시** (기능 실패의 결과):
- `"전압 변환 불가"` - 자속 전달 기능 실패 결과 (S=9)
- `"여자전류 증가"` - 자속 전달 기능 실패 결과 (S=5)
- `"지락사고"` - 절연 유지 기능 실패 결과 (S=10)
- `"권선 과열"` - 전류 흐름 기능 실패 결과 (S=8)
- `"절연유 누출"` - 오일 밀봉 기능 실패 결과 (S=6)

**[X] 잘못된 고장영향 예시**:
| 잘못된 예 | 문제점 | 올바른 처리 |
|----------|--------|------------|
| `"조립 불합격"` | 발견 장소, 기능과 인과관계 없음 | S=4로 반영, 기능 관련 결과로 변경 |
| `"FAT 불합격"` | 발견 장소, 기능과 인과관계 없음 | S=6로 반영, 기능 관련 결과로 변경 |
| `"용접 불량"` | 고장형태임, 고장영향 아님 | E열로 이동 |
| `"와전류 증가"` | 측정값, 고객 인식 불가 | G열(고장메커니즘)으로 이동 |
| `"변형"` | 현재 관찰 현상, 고장형태임 | E열로 이동 |

**인과관계 검증 방법**:
```
질문: "[기능] 실패 → [고장영향] 발생" 이 논리적인가?

[OK] "자속 전달 실패" → "전압 변환 불가" (O)
[OK] "절연 유지 실패" → "지락사고" (O)
[X] "자속 전달 실패" → "적층 불량" (X - 역순!)
[X] "권선 지지 실패" → "FAT 불합격" (X - 발견 장소!)
```

**주의**:
- 번호 금지 ([X] "영향 1: 변압기 정지")
- **발견 장소는 고장영향이 아님** - 심각도를 S값으로 반영
- **측정값(와전류, 손실 등)은 고장영향이 아님** - 고장메커니즘(G열)에 작성
- **상세**: [failure-effect-phases.md](failure-effect-phases.md)

### 4. S (D열) - Severity
**내용**: 고장 영향 심각도 (1-10)
**범위**: 1 (경미) ~ 10 (치명적)
**기준**: [references/sod-criteria.md](sod-criteria.md)
**예시**: 10 (변압기 소손), 7 (기능 정지), 4 (성능 저하)

### 5. 고장형태 (E열)
**내용**: **현재 시각적으로 관찰 가능한 현상** (육안 또는 간단한 검사로 확인)
**1:N 관계**: 1개 고장영향 → **N개 고장형태** (구체적 현상으로 다양하게)

**[!!] 핵심 정의 (CRITICAL)**:
> **고장형태 = 현재 시점에서 시각적으로 관찰 가능한 물리적 현상**
>
> 측정값(와전류, 손실)이나 미래 결과(진동, 소음)와 구분 필수!

**[OK] 올바른 고장형태 예시** (시각적 관찰 가능):

| 유형 | 예시 | 설명 |
|------|------|------|
| **형상 변화** | 변형, 뒤틀림, 좌굴, 팽창 | 모양이 변함 |
| **표면 손상** | 크랙, 균열, 박리, 벗겨짐 | 표면에 손상 |
| **부식/열화** | 부식, 녹, 산화, 변색 | 재료 열화 |
| **결합 문제** | 이완, 풀림, 탈락, 분리 | 체결 불량 |
| **물질 누출** | 누유, 누기, 침투 | 유체/가스 누출 |
| **오염** | 이물질, 오염, 퇴적 | 이물 부착 |
| **마모** | 마모, 침식, 깎임 | 재료 손실 |
| **파손** | 파손, 파단, 절손 | 완전 파괴 |
| **전기적** | 단락, 단선, 접촉불량 | 전기 연결 문제 |

**[X] 잘못된 고장형태 예시** (측정값/미래결과):

| 잘못된 예 | 이유 | 올바른 위치 |
|----------|------|------------|
| `"와전류 증가"` | 측정값, 시각 관찰 불가 | → 고장메커니즘(G열) |
| `"히스테리시스 손실 증가"` | 측정값 | → 고장메커니즘(G열) |
| `"효율 저하"` | 측정값 | → 고장메커니즘(G열) |
| `"진동"` | 미래 고객 인식 결과 | → 고장영향(C열) |
| `"소음"` | 미래 고객 인식 결과 | → 고장영향(C열) |
| `"기능 저하"` | 추상적 표현 | → 구체적 현상으로 변경 |

**고장형태 → 고장영향 연결 예시**:

| 고장형태 (E열) | → | 고장영향 (C열) |
|--------------|---|---------------|
| 크랙 | → | 진동 증가, 소음 발생 |
| 변형 | → | 오작동, 동작불가 |
| 부식 | → | 성능 저하, 수명 단축 |
| 이완 | → | 진동, 체결부 분리 |

**주의**:
- 번호 금지 ([X] "고장형태 1: 변형")
- [OK] **시각적 관찰 가능한 현상만**: `"변형"`, `"크랙"`, `"부식"`, `"이완"`, `"누유"`
- [X] **측정값 금지**: `"증가"`, `"저하"`, `"과도"` 등 측정 필요 용어 지양
- [X] **미래 결과 금지**: `"진동"`, `"소음"` 등은 고장영향(C열)에 작성
- **메커니즘 설명 필요 시**: 고장메커니즘(G열)에 작성

**[SEARCH] 고장형태 3대 분류 체계 (도출 방법)**:

고장형태를 빠짐없이 도출하기 위해 3가지 관점에서 검토:

| 분류 | 정의 | 검토 질문 (가이드 V1.3) | 예시 (철심) |
|------|------|----------|------------|
| **부족 (Insufficient)** | 결과물 미달 | "기능 결과물이 부족하면 어떤 현상?" | 층간단락, 부식, 적층불량, 크랙 |
| **과도 (Excessive)** | 결과물 초과 | "기능 결과물이 과하면 어떤 현상?" | 변색, 팽창, 변형, 용융 |
| **유해 (Harmful)** | 결과물 정상, 부작용 | "기능 결과물 정상인데 부작용은?" | 국부과열, 절연열화 |

**적용 예시 - 철심 "자속을 전달한다" 기능**:
```
부족: 자속 전달 부족 → 층간단락, 부식, 크랙
과도: 자속 과도 (자기포화) → 변형, 과열 흔적
유해: 와전류 발생 (부작용) → 변색, 절연열화
```

**[NEW] 옵션 A (셀 내 줄바꿈 + 괄호 설명)**:

어려운 용어나 왜 그 분류인지 설명이 필요할 때 괄호 안에 설명 추가:

```
형식: 부족: 현상 (또는 과도: / 유해:) **대괄호 금지!**
      (정의/판단근거)

예시 (Excel 셀 내 입력 시 Alt+Enter로 줄바꿈):
[OK] 부족: 적층이완
   (철심 판의 누적 팽창으로 조립 불안정)
   → 판단: 전달이 부족하면 이완이 발생

[OK] 과도: 포화흔적
   (과열로 인한 변색)
   → 판단: 전달이 과하면 과열/변색 발생

[OK] 유해: 와전류흔적
   (발열로 인한 변색)
   → 판단: 전달 시 부작용으로 발열 발생
```

**판단 기준 질문 (가이드 V1.3)**:
- **부족:** "기능 결과물이 부족하면 무엇이 보이나?"
- **과도:** "기능 결과물이 과하면 무엇이 보이나?"
- **유해:** "기능 결과물 정상인데 부작용으로 무엇이 보이나?"

**[!] 해당 없는 경우에도 검토 과정은 수행** (누락 방지)

### 6. 고장원인 (F열)
**내용**: 제품 라이프사이클 단계별 원인
**1:N 관계**: 1개 고장형태 → **N개 고장원인** (2-5개 이상 권장)
**형식**: `[단계]: [설명]`
**단계**: 설계, 재료, 제작, 시험
**예시**:
- `"설계: 철심 적층두께 설계 오류"`
- `"제작: 압착력 부족"`
**주의**: 단계 필수, 번호 금지

### 7. 고장메커니즘 (G열)
**내용**: 원인 → 모드 메커니즘 (FCM)
**1:N 관계**: 1개 고장원인 → **1개 고장메커니즘** (원인마다 고유한 메커니즘)
**형식**: `원인 → 과정 → 결과` (화살표로 인과관계 표현)
**핵심**: WebSearch 기반 실제 물리적 메커니즘 사용
**예시**:
- `"절연 코팅 열화 → 층간 단락 → 와전류 증가"` (23자)
- `"적층 불량 → 와전류 손실 증가 → 국부 과열"` (24자)
- `"습기 침투 → 철심 부식 → 자기 특성 저하"` (21자)

### 8. 현재예방대책 (H열) - [BLOCKING] 내부문서 Read 필수!

> **[!!] CRITICAL**: 간단한 1-2줄 작성 금지! 반드시 내부문서를 Read한 후 상세하게 작성!

**내용**: 현재 적용 중인 고장 예방 조치
**형식**: 멀티라인 (4-8줄) - 단계별 세부항목 + 출처

#### [!!] 멀티라인 형식 (필수)

```
[단계]: [대책 제목]
- [세부항목1] ([출처1])
- [세부항목2] ([기준값])
- [세부항목3] ([출처2])

[단계]: [대책 제목]
- [세부항목1] ([출처1])
...
```

#### 출처 표기 규칙

> **[!!] CRITICAL**: 출처 형식은 **실제 문서를 Read 후** 확인! 추측 금지!
> **상세**: [anti-hallucination.md](anti-hallucination.md)

| 문서 유형 | 형식 | 예시 | **[!] Read 후 확인** |
|----------|------|------|---------------------|
| **CHECK SHEET** | `[부품] CHECK SHEET [구분]-No.[번호]` | `권선 CHECK SHEET 권선-No.5` | 실제 시트명 확인 |
| **Work Flow Sheet** | `WFS-[분야]-[단계]` | `WFS-전기-승인설계` | 실제 단계명 확인 |
| **작업표준(W)** | `W### [순서#]` 또는 `W### [#항]` | `W030 순서3`, `W018 10.1항` | **Read 후 실제 구조 확인!** |
| **수입검사(R)** | `R### [#항]` | `R006 2.1항` | Read 후 구조 확인 |
| **공정검사(I)** | `I### [#항]` 또는 `I### [표#]` | `I013 [표3]` | Read 후 구조 확인 |
| **시험요령(P)** | `P### [#항]` | `P005 4.1항` | Read 후 구조 확인 |
| **도시바TD** | `TD# p.##` | `TD4 p.45` | 해당 페이지 Read |
| **IEC/IEEE** | `IEC/IEEE #### [#항]` | `IEC 60076-5 8.2항` | WebSearch로 확인 |
| **도면** | `LT####-[코드]` | `LT0417-E400` | 도면 Read |

**[!!] 실제 문서 형식 예시** (Read 후 확인된 형식):

| 문서 | 실제 구조 예시 | **[X] 잘못된 추측** |
|------|--------------|-------------------|
| W030 (단자압착작업요령) | `순서 1~7`, `10.1~10.3항`, `11.1~11.6항` | ~~S3.1, S4.2~~ (존재 안함!) |
| W018 (철심조립작업요령) | 실제 Read 후 확인 필요 | ~~3.2항~~ (추측 금지!) |

**[LOCK] Read-Before-Cite 규칙**:
```
1. 출처로 인용하려는 문서를 Read 도구로 열기
2. 실제 섹션/항목 구조 확인 (순서#, #항, #.# 등)
3. 해당 구조에 맞게 출처 작성
4. Read 기록 테이블에 기록
```

#### CHECK SHEET에서 추출할 항목

| CHECK SHEET 컬럼 | FMEA H열 활용 |
|-----------------|---------------|
| **구분** | 단계 분류 (설계/제작) |
| **No.** | 출처 번호 |
| **내용** | 대책 제목 + 세부항목 |

#### [OK] 올바른 예시 (상세 작성)

```json
"현재예방대책": "설계: 허용응력 검토\n- 좌굴 강도 계산서 검토 (권선 CHECK SHEET 권선-No.4)\n- 안전율 적용 1.5배 이상 (TD4 p.78)\n- IEC 60076-5 단락력 계산 포함 (IEC 60076-5 §8.2)\n\n제작: 권선 장력 관리\n- 장력 모니터링 목표값 설정 (W007 §3.1)\n- 장력 편차 ±5% 이내 관리 (권선 CHECK SHEET 권선조립-No.3)\n- 작업 전 장력계 교정 확인 (I005 [표2])"
```

#### [X] 금지 (간략 작성)

**금지 패턴 체크리스트**:
| 금지 패턴 | 예시 | 문제점 |
|----------|------|--------|
| **시리즈명** | `(R시리즈)`, `(W시리즈)`, `(I시리즈)` | **정확한 문서번호 필수!** |
| **CS 약어** | `(권선CS)`, `(단자CS)`, `(중신CS)` | **CHECK SHEET로 풀어쓰기!** |
| 시리즈명만 | `(작업표준)`, `(검사기준)` | 문서번호 없음! |
| 번호 없음 | `(작업표준 준수 확인)` | 항번호 없음! |
| 기준값 없음 | `토크렌치 사용 및 토크값 기록` | 목표값 없음! |

```json
"현재예방대책": "재료: 경도 규격 관리 (R시리즈)"  // [X] 시리즈명! → (IEQT-T-R012 §3.1)
"현재예방대책": "제작: 압착력 점검 (단자CS)"     // [X] CS 약어! → (단자 CHECK SHEET 단자조립-No.3)
"현재예방대책": "제작: 권선 장력 모니터링 (작업표준)"  // [X] 문서번호 없음!
"현재예방대책": "제작: 토크렌치 사용 및 토크값 기록 (작업표준 준수 확인)"  // [X] 기준값 없음!
```

**필수 포함 항목** (출처 우선순위에 따라 적용):
| 항목 | 내부문서 있음 | 외부표준만 있음 | 둘 다 없음 |
|------|-------------|---------------|----------|
| **출처** | `(W018 §3.2)` | `(IEC 60076-5 §8.2)` | `(일반)` |
| **기준값** | 45±5 N.m (필수!) | ±0.5% (필수!) | 구체적 기준 (필수!) |

> **주의**: 출처가 `(일반)`이어도 **기준값은 반드시 명시!**

#### 내부문서 필수 Read 목록

> **핵심**: 시리즈 구분 없이 **인덱스에서 부품 관련 모든 문서 검색 후 Read!**

| 단계 | 추출 내용 | 문서 예시 (시리즈 제한 없음) |
|------|----------|--------------------------|
| **설계** | 설계 검토 항목, 계산 기준 | CHECK SHEET, TD시리즈, WFS |
| **재료** | 재료 규격, 검사 기준 | R시리즈, CHECK SHEET |
| **제작** | 작업 기준, 관리값 | W시리즈, I시리즈, **C시리즈** |
| **시험** | 시험 방법, 합격 기준 | P시리즈, CHECK SHEET, **C시리즈** |

**주의**:
- 단계 태그 필수: `설계:`, `재료:`, `제작:`, `시험:` (**대괄호 금지!**)
- **출처 불명확 금지** - "시리즈"가 아닌 정확한 문서번호 (W007, R006 등)
- **기준값 필수** - 허용오차, 관리값 포함 (±5%, 2500kN 등)

#### 출처 표기 우선순위

| 우선순위 | 출처 유형 | 형식 | 예시 |
|---------|----------|------|------|
| **1순위** | 내부문서 | `(문서번호 §항)` | `(W007 §3.1)`, `(권선 CHECK SHEET 권선-No.5)` |
| **2순위** | 외부표준 | `(표준명 §항)` | `(IEC 60076-5 §8.2)`, `(IEEE C57.12)` |
| **3순위** | 일반관리 | `(일반)` | 내부/외부 문서 없는 일반적 관리항목 |

**내부문서 없는 경우 처리**:
- 외부표준(IEC, IEEE, CIGRE 등)에서 근거 검색
- WebSearch로 업계 Best Practice 확인
- 최후 수단으로 `(일반)` 표기 - 단, 구체적 기준값은 반드시 포함!

```json
// [OK] 내부문서 있는 경우
"설계: 허용응력 검토 (W007 §3.1)"

// [OK] 외부표준 참조
"시험: 내전압시험 기준 적용 (IEC 60076-3 §12)"

// [OK] 일반관리 (최후 수단)
"제작: 외관검사 실시 (일반)\n- 크랙, 변형, 이물질 육안 확인\n- 불합격 시 재작업"
```

### 9. O (I열) - Occurrence
**내용**: 고장 발생 빈도 (1-10)
**범위**: 1 (매우 낮음) ~ 10 (매우 높음)
**기준**: [references/sod-criteria.md](sod-criteria.md)
**예시**: 2 (0.1%/년), 5 (1%/년), 8 (10%/년)

### 10. 현재검출대책 (J열) - [BLOCKING] 내부문서 Read 필수!

> **[!!] CRITICAL**: 간단한 1-2줄 작성 금지! 반드시 내부문서를 Read한 후 상세하게 작성!

**내용**: 현재 적용 중인 고장 검출 조치
**형식**: 멀티라인 (4-8줄) - 단계별 검사항목 + 합격기준 + 출처

#### [!!] 멀티라인 형식 (필수)

```
[단계]: [검출 제목]
- [검사항목1] ([출처1])
- [합격기준] ([기준값])
- [검사장비] ([출처2])

[단계]: [검출 제목]
- [검사항목1] ([출처1])
...
```

#### 출처 표기 규칙

H열과 동일한 출처 표기 규칙 적용 (위 표 참조)

#### 내부문서에서 추출할 항목

> **핵심**: 시리즈 구분 없이 **인덱스에서 부품 관련 모든 문서 검색 후 Read!**

| 검출 단계 | 추출 내용 | 문서 예시 (시리즈 제한 없음) |
|----------|----------|--------------------------|
| **설계검토 (DR)** | 검토 항목, 승인 기준 | CHECK SHEET, TD시리즈, WFS |
| **수입검사** | 재료 검사 방법, 합격 기준 | R시리즈, CHECK SHEET |
| **공정검사** | 공정 중 검사 방법, 측정 장비 | I시리즈, W시리즈, **C시리즈** |
| **시험 (FAT/SAT)** | 시험 방법, 합격 기준 | P시리즈, CHECK SHEET, **C시리즈** |

#### [!!] 단계 약어 설명 (J열 작성 시 참조)

> **[!]** J열 작성 시 약어의 정확한 의미 이해 필수!
> **상세**: [glossary.md](glossary.md) - 라이프사이클 단계 약어

| 약어 | 정식 명칭 | 영문 | 설명 |
|------|----------|------|------|
| **DR** | 설계검토 | Design Review | 설계 단계에서 도면/계산서/CHECK SHEET 검토 |
| **FAT** | 공장출하시험 | Factory Acceptance Test | 출하 전 공장에서 수행하는 시험 |
| **SAT** | 현장인수시험 | Site Acceptance Test | 현장 설치 후 수행하는 시험 |

**[OK] J열 작성 예시 (약어 포함)**:
```
설계: 설계검토 (Design Review)
- 압착 사양 적정성 검토 (단자 CHECK SHEET 단자조립-No.1)
- CHECK SHEET 항목 전수 확인

시험: 내전압시험 (FAT)
- AC 50kV 1분간 인가 (P016 4.1항)
- 합격기준: 섬락/방전 없음
```

#### [OK] 올바른 예시 (상세 작성)

```json
"현재검출대책": "설계: 설계 검토 승인\n- 강도 계산서 교차 검증 (WFS-전기-승인설계)\n- 구조해석 결과 확인 (권선 CHECK SHEET 권선-No.8)\n\n제작: 치수 검사\n- 권선 높이 허용오차 ±2mm (I010 §4.2)\n- 버니어캘리퍼스 측정 (I010 [표3])\n- 반성 체크시트 기록 (권선 CHECK SHEET 권선조립-No.15)\n\n시험: 권선저항 측정\n- 저항값 허용편차 ±0.5% (P012 §3.1)\n- 온도 보정 적용 (IEC 60076-1 §10.2)"
```

#### [X] 금지 (간략 작성)

**금지 패턴 체크리스트**:
| 금지 패턴 | 예시 | 문제점 |
|----------|------|--------|
| **시리즈명** | `(R시리즈)`, `(I시리즈)`, `(P시리즈)` | **정확한 문서번호 필수!** |
| **CS 약어** | `(권선CS)`, `(단자CS)`, `(중신CS)` | **CHECK SHEET로 풀어쓰기!** |
| 시리즈명만 | `(검사기준)`, `(시험요령)` | 문서번호 없음! |
| 번호 없음 | `(IEC 60076-1)` | 항번호 없음! |
| 기준값 없음 | `외관검사`, `치수검사` | 합격기준 없음! |

```json
"현재검출대책": "재료: 경도 입고검사 (R시리즈)"     // [X] 시리즈명! → (IEQT-T-R012 §3.1)
"현재검출대책": "제작: 외관검사 (단자CS)"          // [X] CS 약어! → (단자 CHECK SHEET 단자조립-No.5)
"현재검출대책": "시험: 권선저항 측정 (IEC 60076-1)"  // [X] 항번호/합격기준 없음!
"현재검출대책": "제작: 치수검사 (공정검사기준)"      // [X] 문서번호/허용오차 없음!
```

**필수 포함 항목** (출처 우선순위에 따라 적용):
| 항목 | 내부문서 있음 | 외부표준만 있음 | 둘 다 없음 |
|------|-------------|---------------|----------|
| **출처** | `(I010 §4.2)` | `(IEC 60076-1 §10.2)` | `(일반)` |
| **기준값** | ±2mm (필수!) | ±0.5% (필수!) | 구체적 기준 (필수!) |

> **주의**: 출처가 `(일반)`이어도 **기준값은 반드시 명시!**

#### 내부문서 필수 Read 목록

> **핵심**: 시리즈 구분 없이 **인덱스에서 부품 관련 모든 문서 검색 후 Read!**

| 검출 단계 | 추출 내용 | 문서 예시 (시리즈 제한 없음) |
|----------|----------|--------------------------|
| **설계검토** | 검토 항목, 승인 기준 | CHECK SHEET, TD시리즈, WFS |
| **수입검사** | 재료 검사 방법, 합격 기준 | R시리즈, CHECK SHEET |
| **공정검사** | 공정 검사 방법, 허용오차, 측정 장비 | I시리즈, W시리즈, **C시리즈** |
| **시험** | 시험 방법, 합격 기준, 시험 장비 | P시리즈, IEC/IEEE 표준, **C시리즈** |

**주의**:
- 단계 태그 필수: `설계:`, `재료:`, `제작:`, `시험:` (**대괄호 금지!**)
- **출처 불명확 금지** - "시리즈"가 아닌 정확한 문서번호 (I010, P012 등)
- **기준값 필수** - 허용오차, 합격 기준 포함 (±2mm, ±0.5% 등)

#### D값 판단 기준

| 검출 단계 | D값 범위 | 설명 |
|----------|---------|------|
| 설계검토 (전수) | 1-2 | 설계 단계에서 100% 검출 |
| 수입검사 (전수) | 2-3 | 재료 입고 시 검출 |
| 공정검사 (샘플링) | 3-5 | 제조 중 검출 |
| FAT (시험) | 4-6 | 출하 전 검출 |
| 운전 중 | 6-8 | 현장에서 발견 |
| 검출 불가 | 9-10 | 고장 발생 후 인지 |

**주의**:
- 단계 태그 필수 (설계검토/수입검사/공정검사/시험)
- **합격기준 필수** - 허용오차, 측정값 포함 (±0.5%, DC1000V 0.5MΩ 이상 등)
- **측정장비 명시** - 버니어캘리퍼스, 메가 등 구체적 장비명

### 11. D (K열) - Detection
**내용**: 고장 검출 능력 (1-10)
**범위**: 1 (매우 높음) ~ 10 (검출 불가)
**기준**: [references/sod-criteria.md](sod-criteria.md)
**예시**: 3 (설계 중 검출), 5 (FAT 검출), 8 (운전 중 검출)

### 12. RPN (L열) - Risk Priority Number
**내용**: 위험 우선순위 번호 (1-1000)
**계산**: `RPN = S × O × D`
**범위**: 1 (최저 위험) ~ 1000 (최고 위험)
**색상 코딩**:
- 🔴 빨강 (#C00000): RPN ≥ 200 (고위험)
- 🟡 노랑 (#FFC000): RPN 100-199 (중위험)
- 🟢 녹색 (#92D050): RPN < 100 (저위험)

**RPN vs AP 비교**:
| 항목 | RPN | AP |
|------|-----|-----|
| **계산** | S × O × D (수치) | 논리 조건 |
| **범위** | 1-1000 | H/M/L |
| **장점** | 개선율 측정 가능 | 우선순위 명확 |
| **용도** | 정량적 비교, 트렌드 분석 | 조치 순서 결정 |

**예시**:
- RPN = 252 (S=9, O=4, D=7) → 🔴 빨강 (고위험)
- RPN = 150 (S=6, O=5, D=5) → 🟡 노랑 (중위험)
- RPN = 36 (S=4, O=3, D=3) → 🟢 녹색 (저위험)

**기준**: [references/sod-criteria.md](sod-criteria.md)

### 13. AP (M열) - Action Priority
**내용**: 조치 우선순위 (H/M/L)
**계산**:
- H: S≥9 OR (S≥7 AND O≥7) OR (S≥7 AND D≥7)
- M: S≥7 OR (S≥5 AND O≥5) OR (S≥5 AND D≥5)
- L: 나머지
**색상 코딩** (AIAG-VDA 2019):
- 🔴 H (High): 빨강 (#C00000), 흰색 글자
- 🟡 M (Medium): 노랑 (#FFC000), 흰색 글자
- 🟢 L (Low): 녹색 (#92D050), 흰색 글자
**예시**: H (즉시 대책), M (3개월), L (6개월)

---

## 조치 계획 (14-17번 컬럼) - N~Q열

> **[!] 스킬 범위**: 이 스킬은 리스크 분석(STEP 1-5)까지만 담당합니다.
> **N~Q열(조치계획)은 빈값으로 유지**하며, 추후 담당자가 별도 입력합니다.
> 아래 설명은 추후 작성자를 위한 **참고용**입니다.

### 14. 예방조치 (N열)
**내용**: 계획된 예방 조치 (고장 원인 제거/감소)
**스킬 출력**: 빈값 (추후 담당자 입력)
**작성 가이드** (참고용):
- H: `"Design Review 시 적층두께 계산 검증 강화"`
- M: `"압착력 관리 기준 수립 (2500kN±10%)"`
- L: `"없음"` 또는 `"검토 중"`

### 15. 검출조치 (O열)
**내용**: 계획된 검출 조치 (검출 능력 향상)
**스킬 출력**: 빈값 (추후 담당자 입력)
**작성 가이드** (참고용):
- H: `"적층두께 측정 (FAT 추가)"`
- M: `"압착력 기록 (Preload Recording)"`
- L: `"없음"` 또는 `"검토 중"`

### 16. 담당자 (P열)
**내용**: 대책 실행 책임 팀
**스킬 출력**: 빈값 (추후 담당자 입력)
**작성 가이드** (참고용):
- 설계: `"전기설계팀/구조설계팀"`
- 재료: `"구매팀/QA팀"`
- 제작: `"생산팀"`
- 시험: `"QA팀"`

### 17. 목표일 (Q열)
**내용**: 대책 완료 목표 시점
**스킬 출력**: 빈값 (추후 담당자 입력)
**작성 가이드** (참고용):
- H: `"즉시"`
- M: `"3개월"`
- L: `"6개월"`

---

## 개선 후 (18-22번 컬럼) - R~V열

> **[!] 스킬 범위**: 이 스킬은 리스크 분석(STEP 1-5)까지만 담당합니다.
> **R~V열(개선 후 값)은 빈값으로 유지**하며, 추후 담당자가 별도 입력합니다.
> 아래 설명은 추후 작성자를 위한 **참고용**입니다.

### 18. S' (R열)
**내용**: 대책 적용 후 예상 심각도
**스킬 출력**: 빈값 (추후 담당자 입력)
**작성 가이드** (참고용):
- 기본: S와 동일 (심각도는 대책으로 변경 불가)
- 예외: 설계 변경 시 S 변경 가능

### 19. O' (S열)
**내용**: 대책 적용 후 예상 발생도
**스킬 출력**: 빈값 (추후 담당자 입력)
**작성 가이드** (참고용):
- 기본: O - 1 (최소 1)
- 목표: 예방 조치로 발생 빈도 감소

### 20. D' (T열)
**내용**: 대책 적용 후 예상 검출도
**스킬 출력**: 빈값 (추후 담당자 입력)
**작성 가이드** (참고용):
- 기본: D - 1 (최소 1)
- 목표: 검출 조치로 검출 능력 향상

### 21. RPN' (U열) - Risk Priority Number (개선 후)
**내용**: 개선 후 위험 우선순위 번호
**스킬 출력**: 빈값 (추후 담당자 입력)
**작성 가이드** (참고용):
- 계산: `RPN' = S' x O' x D'`
- 색상 코딩:
  - 빨강 (#C00000): RPN' >= 200 (고위험)
  - 노랑 (#FFC000): RPN' 100-199 (중위험)
  - 녹색 (#92D050): RPN' < 100 (저위험)

**개선 효과 측정** (참고용):
```
RPN_감소율 = (RPN - RPN') / RPN x 100%

예시: RPN=252, RPN'=36
감소율 = (252-36)/252 x 100 = 85.7% 개선
```

### 22. AP' (V열)
**내용**: 개선 후 조치 우선순위
**스킬 출력**: 빈값 (추후 담당자 입력)
**작성 가이드** (참고용):
- 계산: S', O', D' 기반 재계산
- 색상 코딩 (AIAG-VDA 2019):
  - H (High): 빨강 (#C00000), 흰색 글자
  - M (Medium): 노랑 (#FFC000), 흰색 글자
  - L (Low): 녹색 (#92D050), 흰색 글자
- 목표: H -> M, M -> L로 개선

---

## [!] FMEA 피라미드 구조 (1:N 관계)

**CRITICAL**: FMEA는 피라미드 구조로, 각 레벨에서 N개씩 확장됩니다!

### 완전한 계층 구조

```
1개 부품 (예: CORE)
  │
  ├─ 기능 #1: 자속 전달
  │   ├─ 고장영향 #1-1: 전압 변환 불가 (S=10)
  │   │   ├─ 고장형태 #1-1-1: 층간단락
  │   │   │   ├─ 고장원인 #1: 설계: 철심 재질 열화 → [메커니즘] → [대책] → 1개 행
  │   │   │   ├─ 고장원인 #2: 재료: 철심 두께 불량 → [메커니즘] → [대책] → 1개 행
  │   │   │   └─ 고장원인 #3: 제작: 적층 접착 불량 → [메커니즘] → [대책] → 1개 행
  │   │   ├─ 고장형태 #1-1-2: 과열
  │   │   │   ├─ 고장원인 #1: 설계: 단면적 부족 → 1개 행
  │   │   │   └─ 고장원인 #2: 설계: 자속밀도 오류 → 1개 행
  │   │   └─ 고장형태 #1-1-3: 부식
  │   │       └─ [고장원인 N개...]
  │   ├─ 고장영향 #1-2: 권선 소손 (S=9)
  │   │   ├─ 고장형태 #1-2-1: 변형
  │   │   │   └─ [고장원인 N개...]
  │   │   └─ 고장형태 #1-2-2: 균열
  │   │       └─ [고장원인 N개...]
  │   └─ 고장영향 #1-3: 소음 증가 (S=5)
  │       └─ [고장형태 N개...]
  │
  ├─ 기능 #2: 효율 최대화
  │   └─ [고장영향 N개...]
  │
  └─ 기능 #3: 기계적 지지
      └─ [고장영향 N개...]
```

### 핵심 1:N 관계 요약

| 상위 요소 | → | 하위 요소 | 비고 |
|----------|---|----------|------|
| 1개 부품 | → | 기능 | WebSearch에서 발견된 기능 |
| 1개 기능 | → | 고장영향 | 기능 실패 시 발견된 영향 |
| 1개 고장영향 | → | 고장형태 | 구체적 현상 (변형, 크랙 등) |
| 1개 고장형태 | → | 고장원인 | WebSearch에서 발견된 원인 |
| 1개 고장원인 | → | 고장메커니즘 | 원인마다 고유한 메커니즘 |

**핵심 원칙**: WebSearch에서 발견된 항목에 따라 자연스럽게 행 생성 (억지로 개수를 맞추지 않음)

**상세**: [references/fmea-concepts.md](fmea-concepts.md)

---

## 컬럼별 작성 규칙

### 형식 규칙

**1. 번호 금지** (A, B, C, E, F열):
- [X] `"기능 1: 자속 전달"`
- [X] `"고장영향 1: 변압기 정지"`
- [X] `"① 층간단락"`
- [OK] `"자속 전달"`, `"변압기 정지"`, `"층간단락"`

**2. 고장원인 형식** (F열):
- [OK] `"설계: 적층두께 설계 오류"`
- [X] `"적층두께 설계 오류"` (단계 누락)
- [X] `"1. 설계: 적층두께 설계 오류"` (번호)

**3. 고장형태 작성** (E열):
- [OK] 구체적 현상: 변형, 크랙, 부식, 과열, 단락, 누유, 소음, 진동, 절연열화, 층간단락 등
- [X] 추상적 용어: `"부족"`, `"저하"`, `"과도"` 등 지양

### 개별 생성 규칙 (13-20번 컬럼)

**[!] CRITICAL**: 각 FMEA 항목마다 **다른 값** 필수!

**잘못된 방식** (템플릿 반복):
```python
# [X] 모든 항목에 같은 값
row['예방조치'] = "설계 검증 강화"  # 반복!
row['검출조치'] = "FAT 검사"  # 반복!
```

**올바른 방식** (개별 생성):
```python
# [OK] 각 항목마다 다른 값
if "설계: 적층두께" in 고장원인:
    예방조치 = "Design Review 시 적층두께 계산 검증 강화"
    검출조치 = "적층두께 측정 (FAT)"
elif "제작: 압착력" in 고장원인:
    예방조치 = "압착력 관리 기준 수립 (2500kN±10%)"
    검출조치 = "압착력 기록 (Preload Recording)"
```

---

## 정렬 순서 (CRITICAL)

**Excel 생성 전 필수 정렬**:
1. 부품명 (알파벳/한글 순)
2. 기능 (기능 번호 순)
3. 고장영향 (S 내림차순)
4. 고장형태 (문자열 순)
5. 고장원인 (라이프사이클 단계 순: 설계→재료→제작→시험)

**상세 알고리즘**: [references/excel-generation.md](excel-generation.md)

---

## 셀 병합 규칙

**병합 대상**: A-E 컬럼만 (부품명, 기능, 고장영향, S, 고장형태)
**병합 금지**: F-V 컬럼 (고장원인~AP')

**상세**: [references/excel-generation.md](excel-generation.md)

---

## 빈 값 방지

**모든 컬럼 필수**: 22개 컬럼 모두 값 존재 필수

**Fallback 기본값**:
- 예방조치/검출조치: AP 기준
  - H/M: `"검토 중"`
  - L: `"없음"`
- 담당자: 라이프사이클 단계별 자동 매핑
- 목표일: AP 기준 (`"즉시"`, `"3개월"`, `"6개월"`)

---

## 검증

**형식 검증** (validate_data):
- 빈 값 검사 (22개 컬럼)
- 번호 표기 검사
- 고장형태 표준 검사
- 고장원인 형식 검사
- RPN 계산 검증 (S × O × D)

**논리 검증** (validate_logical_consistency):
- H~T열 반복 검사
- 담당자 일치 검사
- 예방/검출 조치 구체성 검사
- 원인-대책 연결성 검사

**상세**: [references/excel-generation.md](excel-generation.md)
